<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Translate a Math PDF (Co-written with Gemini 2.5 Pro)</title>
    <style>
        /* Basic styling for readability */
        body { font-family: sans-serif; line-height: 1.6; margin: 2em; }
        h1, h2, h3, h4 { margin-top: 1.5em; }
        pre { background-color: #f4f4f4; padding: 1em; border: 1px solid #ddd; overflow-x: auto; white-space: pre-wrap; /* Wrap long lines */ word-wrap: break-word; /* Break words if needed */ }
        code { font-family: monospace; }
        ul, ol { margin-left: 1.5em; }
        li { margin-bottom: 0.5em; }
        /* Style to visually separate Gemini's explanation */
        .gemini-explanation { border-left: 4px solid #4285F4; /* Google blue */ padding-left: 1em; margin-top: 1.5em; margin-bottom: 1.5em;}
    </style>
</head>
<body>

<h1>How to Translate a Math PDF (Co-written with Gemini 2.5 Pro)</h1>

<p>Nowadays, multimodal AI models can take as input a math paper in a non-English language and output a translation directly in LaTeX. Below is a guide on this. Before proceeding, beware that there are always risks of hallucination or error from the AI and from the fact that this guide was written in April 2025 and was suboptimal even when written.</p>

<p>A quick note: for this to work, the core capability for this task has to exist in the multimodal AI itself. The guide below merely provides scaffolding to overcome the following two common challenges:</p>
<ul>
    <li><strong>Output Length Limits:</strong> AIs often can't generate the entire LaTeX for a long paper in one output, especially via API calls.</li>
    <li><strong>AI Confusion from Input Size:</strong> Processing hundreds of pages of math can sometimes lead to a degradation in translation ability or increased errors.</li>
</ul>

<p>We divide this guide into two main situations.</p>

<h2>Situation 1 (Easiest): Translating Short Papers (e.g., < 20 pages)</h2>

<p>If the paper is short, you can often translate it directly using a chat interface for any capable multimodal AI model (like Google's AI Studio for Gemini).</p>
<ol>
    <li><strong>Method:</strong> Upload the PDF directly into the chat interface.</li>
    <li><strong>Prompt:</strong> Use a prompt like this:
        <pre><code>Please translate the uploaded document into English LaTeX code. Ensure all mathematical formulas and environments are preserved correctly. Generate the complete LaTeX document, including a suitable preamble.</code></pre>
    </li>
    <li><strong>Process:</strong> Copy the AI's generated LaTeX output, paste it into your LaTeX editor (e.g., Overleaf), compile, and carefully review the resulting PDF.</li>
</ol>

<h2>Situation 2: Translation for Longer Papers via an API</h2>

<p>For longer papers, we must divide the paper into manageable chunks for translation. Using the Gemini API, it is possible to write code to automate this process. The philosophy here is that the scaffolding imposed on the AI model should be minimal, so as not to interfere with the AI's own ability to process and translate effectively.</p>

<p>The basic script workflow involves these steps:</p>
<ol>
    <li>Determine how to split the PDF into chunks (e.g., based on logical sections suggested by the AI, or simply using fixed page counts).</li>
    <li>Call the Gemini API for each chunk, sending the relevant pages (potentially as images or extracted text, depending on the chosen API capabilities and complexity) for translation into LaTeX format.</li>
    <li>Combine the resulting LaTeX pieces generated for each chunk into a single, final <code>.tex</code> file.</li>
</ol>

<!-- User's corrected paragraph -->
<p>We provide an <a href="pdf_latex_translator.py" download>example script</a> written with Gemini.
<!-- Make sure pdf_latex_translator.py is in the same directory as this HTML file, or adjust the href path -->
In order the use this script, you first need to obtain a Gemini API key and set up a Python environment with the necessary libraries installed. </p>

<p>I'll let Gemini explain in more detail:</p>

<div class="gemini-explanation"> <!-- Added class back for styling -->
    <h3>How to Use the Python Script</h3>
    <p>(Assuming you have downloaded the <code>pdf_latex_translator.py</code> script)</p>

    <h4>1. Requirements:</h4>
    <ul>
        <li><strong>Python Environment:</strong> A working Python installation (version 3.x recommended). It's best practice to use a virtual environment (like `venv`).</li>
        <li><strong>Required Python Packages:</strong> Install these using pip (or pip3):
            <pre><code>pip install google-generativeai pypdf python-dotenv</code></pre>
        </li>
        <li><strong>LaTeX Distribution:</strong> You need a way to compile the final <code>.tex</code> file (e.g., TeX Live, MiKTeX installed locally, or an online editor like Overleaf).</li>
        <li><strong>Gemini API Key:</strong> Obtain an API key from <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer">Google AI Studio</a>. You'll need to save this key, for example in a <code>.env</code> file in the same directory as the script (format: <code>GEMINI_API_KEY=YOUR_API_KEY_HERE</code>) or as a system environment variable.</li>
    </ul>

    <h4>2. Run the Script:</h4>
    <p>Execute the script from your terminal, providing the input PDF path and desired output TeX file path:</p>
    <pre><code>python pdf_latex_translator.py "path/to/your/document.pdf" "path/to/output/translated_document.tex"</code></pre>
    <ul>
        <li>Replace the placeholder paths with your actual file paths.</li>
        <li><em>Note: Depending on your system configuration, you might need to use <code>python3</code> instead of <code>python</code>.</em></li>
    </ul>

    <h4>3. Optional Arguments:</h4>
    <p>Customize the script's execution with these flags:</p>
    <ul>
        <li><code>--env path/to/.env</code>: Specify a different path for your <code>.env</code> file containing the API key.</li>
        <li><code>--chunk_size N</code>: Set pages per chunk (default: 10) if AI chunking fails or is disabled.</li>
        <li><code>--disable_ai_chunking</code>: Use fixed-size chunks only.</li>
        <li><code>--model model_name</code>: Specify a Gemini model (e.g., <code>gemini-1.5-flash</code>, <code>gemini-2.5-pro-exp-03-25</code>). Check Google's documentation for current models and pricing/free tier details.</li>
    </ul>

    <h3>Explanation and Key Features of the Script</h3>
    <p>(This section outlines the script's internal logic. Refer to the script's comments for full details.)</p>
    <ul>
        <li><strong>API Key Loading:</strong> Securely loads the API key.</li>
        <li><strong>PDF Handling:</strong> Uses <code>pypdf</code> for page reading and text extraction.</li>
        <li><strong>Chunking Strategy:</strong> Attempts AI-driven chunking, falls back to fixed chunks.</li>
        <li><strong>Gemini Translation:</strong> Constructs specific prompts for first vs. subsequent chunks to handle LaTeX preamble correctly. Preserves math.</li>
        <li><strong>Combining Output:</strong> Joins parts, ensures correct document structure.</li>
        <li><strong>Error Handling:</strong> Includes checks for file, PDF, and API issues.</li>
        <li><strong>Command-Line Interface:</strong> Uses <code>argparse</code> for flexibility.</li>
        <li><strong>Logging:</strong> Provides progress updates.</li>
    </ul>
</div> <!-- End of gemini-explanation div -->

<p>You can download the example Python script discussed above here: <a href="pdf_latex_translator.py" download>pdf_latex_translator.py</a>.</p>
<!-- Make sure pdf_latex_translator.py is in the same directory as this HTML file, or adjust the href path -->

</body>
</html>
